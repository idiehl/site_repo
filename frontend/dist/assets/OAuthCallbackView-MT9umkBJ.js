import{u as _,r as d,m as p,l as g,k,c as n,a as t,d as v,t as w,o as a}from"./index-CBgiqX6t.js";const x={class:"min-h-screen flex items-center justify-center px-4"},b={class:"w-full max-w-md"},y={class:"card text-center"},A={key:0,class:"py-8"},C={key:1,class:"py-8"},B={class:"text-night-400 mb-6"},L={__name:"OAuthCallbackView",setup(M){const i=k(),c=g(),h=_(),o=d(null),s=d(!0);p(async()=>{if(c.query.error){o.value=m(c.query.error),s.value=!1;return}const r=window.location.hash.substring(1),e=new URLSearchParams(r),l=e.get("access_token"),u=e.get("refresh_token");if(!l||!u){o.value="No tokens received from authentication provider",s.value=!1;return}try{await h.handleOAuthCallback({access_token:l,refresh_token:u}),window.history.replaceState(null,"",window.location.pathname),i.push("/dashboard")}catch{o.value="Failed to complete authentication",s.value=!1}});function m(r){return{invalid_state:"Invalid authentication state. Please try again.",oauth_not_configured:"OAuth is not configured on this server.",token_exchange_failed:"Failed to exchange authorization code.",no_access_token:"No access token received.",userinfo_failed:"Failed to retrieve user information.",missing_user_data:"Missing required user data from provider.",network_error:"Network error occurred. Please try again."}[r]||"An unknown error occurred."}function f(){i.push("/login")}return(r,e)=>(a(),n("div",x,[t("div",b,[t("div",y,[s.value?(a(),n("div",A,[...e[0]||(e[0]=[t("div",{class:"animate-spin w-12 h-12 border-4 border-atlas-400 border-t-transparent rounded-full mx-auto mb-4"},null,-1),t("p",{class:"text-night-300"},"Completing authentication...",-1)])])):o.value?(a(),n("div",C,[e[1]||(e[1]=t("div",{class:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[2]||(e[2]=t("h2",{class:"text-xl font-semibold text-red-400 mb-2"},"Authentication Failed",-1)),t("p",B,w(o.value),1),t("button",{onClick:f,class:"btn btn-primary"}," Back to Login ")])):v("",!0)])])]))}};export{L as default};
