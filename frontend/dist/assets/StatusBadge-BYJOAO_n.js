import{D as j,r as u,x as d,s as o,c as _,o as m,t as J,p as F}from"./index-CsHBq9cG.js";const S=j("jobs",()=>{const r=u([]),i=u(null),n=u(!1),l=u(null),p=d(()=>r.value.filter(e=>e.status==="pending"||e.status==="processing")),b=d(()=>r.value.filter(e=>e.status==="completed")),f=d(()=>r.value.filter(e=>e.status==="failed"));async function c(){var e,t;n.value=!0,l.value=null;try{const a=await o.get("/api/v1/jobs");r.value=a.data}catch(a){l.value=((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.detail)||"Failed to fetch jobs"}finally{n.value=!1}}async function g(e){var t,a;n.value=!0,l.value=null;try{const s=await o.get(`/api/v1/jobs/${e}`);return i.value=s.data,s.data}catch(s){return l.value=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to fetch job",null}finally{n.value=!1}}async function v(e){var t,a;n.value=!0,l.value=null;try{const s=await o.post("/api/v1/jobs/ingest",{urls:e});return await c(),s.data}catch(s){return l.value=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to ingest jobs",null}finally{n.value=!1}}async function y(e){var t,a;try{return await o.delete(`/api/v1/jobs/${e}`),r.value=r.value.filter(s=>s.id!==e),!0}catch(s){return l.value=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to delete job",!1}}async function h(e){var t,a;try{return await o.post(`/api/v1/jobs/${e}/retry`),await c(),!0}catch(s){return l.value=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to retry job",!1}}async function w(){var e,t;n.value=!0,l.value=null;try{const a=await o.post("/api/v1/jobs/retry-all-failed");return await c(),a.data}catch(a){return l.value=((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.detail)||"Failed to retry jobs",null}finally{n.value=!1}}return{jobs:r,currentJob:i,loading:n,error:l,pendingJobs:p,completedJobs:b,failedJobs:f,fetchJobs:c,fetchJob:g,ingestJobs:v,deleteJob:y,retryJob:h,retryAllFailed:w}}),B={__name:"StatusBadge",props:{status:{type:String,required:!0}},setup(r){const i=r,n={pending:{label:"Pending",class:"badge-pending"},processing:{label:"Processing",class:"badge-pending"},completed:{label:"Ready",class:"bg-green-500/20 text-green-400"},needs_review:{label:"⚠️ Incomplete",class:"bg-orange-500/20 text-orange-400"},failed:{label:"Failed",class:"badge-rejected"},applied:{label:"Applied",class:"badge-applied"},followup_scheduled:{label:"Follow-up",class:"badge-applied"},interview_scheduled:{label:"Interview",class:"badge-interview"},offer_received:{label:"Offer",class:"badge-offer"},rejected:{label:"Rejected",class:"badge-rejected"},withdrawn:{label:"Withdrawn",class:"bg-night-600/20 text-night-400"},no_response_closed:{label:"Closed",class:"bg-night-600/20 text-night-400"}},l=d(()=>n[i.status]||{label:i.status,class:""});return(p,b)=>(m(),_("span",{class:F(["badge",l.value.class])},J(l.value.label),3))}};export{B as _,S as u};
