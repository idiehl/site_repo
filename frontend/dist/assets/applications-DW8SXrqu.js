import{D as b,r as u,s as r}from"./index-CBgiqX6t.js";const j=b("applications",()=>{const s=u([]),p=u(null),l=u(!1),i=u(null);async function h(){var n,t;l.value=!0,i.value=null;try{const e=await r.get("/api/v1/applications");s.value=e.data}catch(e){i.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.detail)||"Failed to fetch applications",console.error("Failed to fetch applications:",e)}finally{l.value=!1}}async function g(n){var t,e;l.value=!0,i.value=null;try{const a=await r.get(`/api/v1/applications/${n}`);return p.value=a.data,a.data}catch(a){return i.value=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.detail)||"Failed to fetch application",console.error("Failed to fetch application:",a),null}finally{l.value=!1}}async function y(n,t=null){var e,a;l.value=!0,i.value=null;try{const o=await r.post("/api/v1/applications",{job_posting_id:n,notes:t});return s.value.unshift(o.data),p.value=o.data,o.data}catch(o){throw i.value=((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.detail)||"Failed to create application",o}finally{l.value=!1}}async function w(n,t,e=null){var a,o,v;l.value=!0,i.value=null;try{const c={status:t};e&&(c.notes=e);const d=await r.patch(`/api/v1/applications/${n}`,c),f=s.value.findIndex(_=>_.id===n);return f!==-1&&(s.value[f]=d.data),((a=p.value)==null?void 0:a.id)===n&&(p.value=d.data),d.data}catch(c){throw i.value=((v=(o=c.response)==null?void 0:o.data)==null?void 0:v.detail)||"Failed to update application",c}finally{l.value=!1}}async function F(n){var t,e;try{return(await r.post(`/api/v1/applications/${n}/interview-prep`)).data}catch(a){throw i.value=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.detail)||"Failed to generate interview prep",a}}async function m(n){var t,e;try{return(await r.post(`/api/v1/applications/${n}/improvement`)).data}catch(a){throw i.value=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.detail)||"Failed to generate suggestions",a}}async function A(n){var t,e;try{return(await r.post(`/api/v1/applications/${n}/followup-message`)).data}catch(a){throw i.value=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.detail)||"Failed to generate follow-up message",a}}function $(n){return s.value.find(t=>t.job_posting_id===n)}function S(){p.value=null}return{applications:s,currentApplication:p,loading:l,error:i,fetchApplications:h,fetchApplication:g,createApplication:y,updateApplicationStatus:w,generateInterviewPrep:F,generateImprovementSuggestions:m,generateFollowupMessage:A,getApplicationForJob:$,clearCurrent:S}});export{j as u};
