import{_ as w}from"./quickpro-icon-BEYmoaV4.js";import{u as k,r as p,x as A,m as S,c as l,a as t,h as n,i as d,j as V,t as o,f as C,d as g,p as h,s as D,k as E,o as r,g as c}from"./index-tJy5BnYm.js";const L={class:"min-h-screen bg-night-950"},j={class:"bg-night-900/50 border-b border-night-800"},N={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},B={class:"flex items-center justify-between h-16"},O={class:"flex items-center gap-4"},P={class:"hidden md:flex items-center gap-1"},R={class:"flex items-center gap-4"},q={class:"text-sm text-night-400"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Q={key:0,class:"card bg-red-900/20 border-red-800"},T={key:1,class:"card"},U={key:2,class:"card bg-red-900/20 border-red-800"},z={class:"text-red-400"},F={key:3},I={class:"mb-8"},J={class:"text-2xl font-bold mb-4"},M={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Y={class:"card"},G={class:"text-3xl font-bold text-atlas-400"},K={class:"text-xs text-night-500 mt-1"},W={class:"card"},X={class:"text-3xl font-bold text-green-400"},Z={class:"text-xs text-night-500 mt-1"},$={class:"card"},tt={class:"text-3xl font-bold text-blue-400"},st={class:"text-xs text-night-500 mt-1"},et={class:"card"},ot={class:"text-3xl font-bold text-purple-400"},it={class:"text-xs text-night-500 mt-1"},at={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},lt={class:"card"},nt={class:"text-2xl font-bold"},dt={class:"text-xs text-night-500 mt-1"},rt={class:"text-xs text-red-400 mt-1"},ct={key:0,class:"text-xs text-red-400 mt-1"},xt={class:"card"},ut={class:"text-xs text-night-500 mt-1"},mt={class:"card"},pt={class:"flex flex-wrap gap-3"},ht={__name:"AdminDashboardView",setup(vt){const b=E(),u=k();function f(){u.logout(),b.push({name:"login"})}const m=p(!0),e=p(null),x=p(null),v=A(()=>{var a;return((a=u.user)==null?void 0:a.is_admin)===!0});async function y(){var a,s;m.value=!0,x.value=null;try{const i=await D.get("/api/v1/admin/stats/overview",{params:{days:30}});e.value=i.data}catch(i){x.value=((s=(a=i.response)==null?void 0:a.data)==null?void 0:s.detail)||"Failed to load stats"}finally{m.value=!1}}return S(()=>{v.value&&y()}),(a,s)=>{var _;const i=V("router-link");return r(),l("div",L,[t("header",j,[t("div",N,[t("div",B,[t("div",O,[s[4]||(s[4]=t("div",{class:"flex items-center"},[t("img",{src:w,alt:"Q",class:"w-8 h-8 -mr-0.5"}),t("h1",{class:"text-xl font-bold text-atlas-400"},"uickPRO Admin")],-1)),t("nav",P,[n(i,{to:"/admin",class:"px-3 py-2 rounded-lg text-sm font-medium text-night-100 bg-night-800"},{default:d(()=>[...s[0]||(s[0]=[c(" Overview ",-1)])]),_:1}),n(i,{to:"/admin/analytics",class:"px-3 py-2 rounded-lg text-sm font-medium text-night-400 hover:text-night-100 hover:bg-night-800/50"},{default:d(()=>[...s[1]||(s[1]=[c(" Analytics ",-1)])]),_:1}),n(i,{to:"/admin/security",class:"px-3 py-2 rounded-lg text-sm font-medium text-night-400 hover:text-night-100 hover:bg-night-800/50"},{default:d(()=>[...s[2]||(s[2]=[c(" Security ",-1)])]),_:1}),n(i,{to:"/dashboard",class:"px-3 py-2 rounded-lg text-sm font-medium text-night-400 hover:text-night-100 hover:bg-night-800/50"},{default:d(()=>[...s[3]||(s[3]=[c(" User Dashboard ",-1)])]),_:1})])]),t("div",R,[t("span",q,o((_=C(u).user)==null?void 0:_.email),1),t("button",{onClick:f,class:"btn btn-ghost text-sm"}," Logout ")])])])]),t("main",H,[v.value?m.value?(r(),l("div",T,[...s[6]||(s[6]=[t("p",{class:"text-night-400"},"Loading statistics...",-1)])])):x.value?(r(),l("div",U,[t("p",z,o(x.value),1)])):e.value?(r(),l("div",F,[t("div",I,[t("h2",J,"Overview (Last "+o(e.value.period_days)+" Days)",1),t("div",M,[t("div",Y,[s[7]||(s[7]=t("p",{class:"text-sm text-night-400 mb-1"},"Total Users",-1)),t("p",G,o(e.value.users.total),1),t("p",K,o(e.value.users.new)+" new",1)]),t("div",W,[s[8]||(s[8]=t("p",{class:"text-sm text-night-400 mb-1"},"Job Postings",-1)),t("p",X,o(e.value.jobs.total),1),t("p",Z,o(e.value.jobs.recent)+" recent",1)]),t("div",$,[s[9]||(s[9]=t("p",{class:"text-sm text-night-400 mb-1"},"Applications",-1)),t("p",tt,o(e.value.applications.total),1),t("p",st,o(e.value.applications.recent)+" recent",1)]),t("div",et,[s[10]||(s[10]=t("p",{class:"text-sm text-night-400 mb-1"},"Site Visits",-1)),t("p",ot,o(e.value.traffic.total_visits),1),t("p",it,o(e.value.traffic.unique_visitors)+" unique",1)])]),t("div",at,[t("div",lt,[s[11]||(s[11]=t("p",{class:"text-sm text-night-400 mb-1"},"API Calls",-1)),t("p",nt,o(e.value.api.total_calls.toLocaleString()),1),t("p",dt," Avg: "+o(e.value.api.avg_response_time_ms)+"ms ",1),t("p",rt," Error Rate: "+o(e.value.api.error_rate_percent)+"% ",1)]),t("div",{class:h(["card",e.value.security.critical_events>0?"bg-red-900/20 border-red-800":""])},[s[12]||(s[12]=t("p",{class:"text-sm text-night-400 mb-1"},"Security Events",-1)),t("p",{class:h(["text-2xl font-bold",e.value.security.critical_events>0?"text-red-400":"text-yellow-400"])},o(e.value.security.unresolved_events),3),e.value.security.critical_events>0?(r(),l("p",ct,o(e.value.security.critical_events)+" critical ",1)):g("",!0)],2),t("div",xt,[s[13]||(s[13]=t("p",{class:"text-sm text-night-400 mb-1"},"System Health",-1)),s[14]||(s[14]=t("p",{class:"text-2xl font-bold text-green-400"},"Healthy",-1)),t("p",ut," Error rate: "+o(e.value.api.error_rate_percent)+"% ",1)])])]),t("div",mt,[s[17]||(s[17]=t("h3",{class:"text-lg font-semibold mb-4"},"Quick Actions",-1)),t("div",pt,[n(i,{to:"/admin/analytics",class:"btn btn-primary"},{default:d(()=>[...s[15]||(s[15]=[c(" View Analytics ",-1)])]),_:1}),n(i,{to:"/admin/security",class:"btn btn-secondary"},{default:d(()=>[...s[16]||(s[16]=[c(" Security Events ",-1)])]),_:1})])])])):g("",!0):(r(),l("div",Q,[...s[5]||(s[5]=[t("h2",{class:"text-xl font-bold text-red-400 mb-2"},"Access Denied",-1),t("p",{class:"text-night-300"},"You do not have admin privileges.",-1)])]))])])}}};export{ht as default};
