"use strict";!function(t){function e(){var e={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(t,e){var r=jQuery(e.origin).attr("data-tip");r&&t.content(r)}};t(".ur-portal-tooltip").tooltipster(e)}function r(){function e(t,e){return Math.floor(Math.random()*(Number(e)-Number(t)+1))+Number(t)}t(".ur-frontend-form").find(".ur-captcha-equation").each(function(){var r,a,o,n=t(this).closest(".input-wrapper"),i=user_registration_pro_frontend_data.captcha_equation_param;do{r=e(i.min,i.max),a=e(i.min,i.max),o=i.cal[Math.floor(Math.random()*i.cal.length)]}while("-"===o&&r<a);n.find("span.n1").text(r),n.find("input.n1").val(r),n.find("span.n2").text(a),n.find("input.n2").val(a),n.find("input.cal").val(o),t("html").attr("dir"),n.find("span.cal").text(o),n.find("input.input-captcha").attr({"data-cal":o,"data-n1":r,"data-n2":a})})}t(document).ready(function(){user_registration_pro_frontend_data.has_create_user_capability&&user_registration_pro_frontend_data.is_user_logged_in?t(document).find(".user-registration-modal-link").show():!user_registration_pro_frontend_data.has_create_user_capability&&user_registration_pro_frontend_data.is_user_logged_in&&t(document).find(".user-registration-modal-link").hide()}),t(document).on("hover",".user-registration-modal-link",function(e){t(".user-registration-modal-link").css("cursor","pointer")}),t(document).find(".user-registration-modal-link").each(function(){t(this).on("click",function(e){e.preventDefault();t(this),t.map(t(this)[0].classList,function(e,r){if(0===e.indexOf("user-registration-modal-link-")){var a=e.replace("user-registration-modal-link-",""),o=t(".user-registration-modal-"+a).length-1;t(".user-registration-modal-"+a).each(function(e){return e==o?(t(this).find(".user-registration-error").remove(),t(this).show(),!1):(t(this).remove(),!0)}),t(document.body).addClass("user-registration-modal-open")}})})}),t(".ur-frontend-form.login").on("submit",function(){if(t(this).closest(".user-registration-modal").length)t.map(t(this).closest(".user-registration-modal")[0].classList,function(e,r){if(0===e.indexOf("user-registration-modal-")){var a=e.replace("user-registration-modal-",""),o={};o.popup_id=a,t(".user-registration-modal-"+a).closest(".entry-content").length?o.inner_popup=!0:o.inner_popup=!1,localStorage.setItem("ur_pro_popup",JSON.stringify(o))}});else localStorage.removeItem("ur_pro_popup")}),t(".user-registration-modal").ready(function(){t(".entry-content").find(".user-registration-modal").length&&0===t(".entry-content").find(".user-registration-popup-button").length&&t(document.body).addClass("user-registration-modal-open");var e=JSON.parse(localStorage.getItem("ur_pro_popup"));if(e&&e.popup_id){var r=e.popup_id,a=t(".user-registration-modal-"+r);t(".entry-content").find(".ur-frontend-form.login").length?t(".entry-content").find(".ur-frontend-form.login").each(function(){t(this).closest("body").find(".entry-content .user-registration-error").length&&(!0===e.inner_popup?t(this).closest("body").find(".entry-content").find(".user-registration-error").prependTo(a.find(".user-registration")):t(this).closest(".user-registration").find(".user-registration-error").prependTo(a.find(".user-registration")),t(this).closest("body").find(".user-registration-modal").hide(),a.show())}):t(".user-registration-modal").find(".ur-frontend-form.login").each(function(){t(this).siblings(".user-registration-error").length&&t(this).closest(".user-registration").find(".user-registration-error").prependTo(a.find(".user-registration")),t(this).closest("body").find(".user-registration-modal").hide(),a.show()}),localStorage.removeItem("ur_pro_popup"),t(document.body).addClass("user-registration-modal-open")}t(".user-registration-modal").find(".ur-frontend-form.login").each(function(){if(t(this).find("#ur-recaptcha-node").length>0){var e=t(this).closest(".user-registration-modal").attr("class").split(" ")[1].replace("user-registration-modal-","");t(this).find("#node_recaptcha_login").attr("id","node_recaptcha_login_popup_"+e)}})}),t(document).on("click",".user-registration-modal__close-icon, .user-registration-modal__backdrop",function(){t(this).closest(".user-registration-modal").css({display:"none",opacity:"1"}),t(document.body).removeClass("user-registration-modal-open")}),t(document).on("click",".user-registration-MyAccount-navigation-link--delete-account",function(){var e=user_registration_pro_frontend_data.delete_account_option,r='<span class="user-registration-swal2-modal__title">'+user_registration_pro_frontend_data.delete_account_popup_title;return swal.fire({title:r,html:user_registration_pro_frontend_data.delete_account_popup_html,confirmButtonText:user_registration_pro_frontend_data.delete_account_button_text,confirmButtonColor:"#FF4149",showConfirmButton:!0,showCancelButton:!0,cancelButtonText:user_registration_pro_frontend_data.cancel_button_text,customClass:{container:"user-registration-swal2-container"},focusConfirm:!1,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(r){var a="";if("prompt_password"===e){var o=Swal.getPopup().querySelector("#password").value;o?a={action:"user_registration_pro_delete_account",password:o}:(Swal.showValidationMessage(user_registration_pro_frontend_data.please_enter_password),Swal.hideLoading(),t(".swal2-actions").find("button").prop("disabled",!1))}else a={action:"user_registration_pro_delete_account"};""!==a&&t.ajax({url:user_registration_pro_frontend_data.ajax_url,method:"POST",data:a}).done(function(e){e.success?Swal.fire({icon:"success",title:user_registration_pro_frontend_data.account_deleted_message,customClass:"user-registration-swal2-modal user-registration-swal2-modal--center",showConfirmButton:!1,timer:1e3}).then(function(t){window.location.reload()}):(Swal.showValidationMessage(e.data.message),Swal.hideLoading(),t(".swal2-actions").find("button").prop("disabled",!1))})})}}),!1}),t(document).on("click",".ur-reset-button",function(e){e.preventDefault(),Swal.fire({html:user_registration_pro_frontend_data.clear_button_text,icon:"warning",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",allowOutsideClick:!1,showCancelButton:!0,customClass:{container:"user-registration-swal2-container"}}).then(function(e){!0===e.value&&(t(document).trigger("user_registration_frontend_reset_button"),t(".ur-field-item.field-select2 select").val(null).trigger("change"),t(".ur-field-item.field-multi_select2 select").val(null).trigger("change"),t(".ur-frontend-form").find("form.register").validate().resetForm(),t(".user-registration-error").remove(),t(".ur-frontend-form").find("form.register").trigger("reset"))})}),t(document).on("click",".user-registartion-force-logout",function(e){e.preventDefault();var r=t(".user-registartion-force-logout").data("user-id"),a=t(".user-registartion-force-logout").data("email");t.ajax({type:"POST",url:user_registration_pro_frontend_data.ajax_url,data:{action:"user_registration_pro_send_email_logout",user_email:a,user_id:r},success:function(e){t("#user-registration").find(".user-registration-error").remove(),t("#user-registration").prepend('<ul class="user-registration-message">'+user_registration_pro_frontend_data.email_sent_successfully_message+"</ul>")}})}),t(document).ready(function(){"undefined"!=typeof t.fn.mailcheck&&user_registration_pro_frontend_data.mailcheck_enabled&&(user_registration_pro_frontend_data.mailcheck_domains.length>0&&(Mailcheck.defaultDomains=Mailcheck.defaultDomains.concat(user_registration_pro_frontend_data.mailcheck_domains)),user_registration_pro_frontend_data.mailcheck_toplevel_domains.length>0&&(Mailcheck.defaultTopLevelDomains=Mailcheck.defaultTopLevelDomains.concat(user_registration_pro_frontend_data.mailcheck_toplevel_domains)),t(document).on("blur",".ur-field-item .input-email",function(){var e=t(this),r=e.attr("id");e.mailcheck({suggested:function(e,a){t("#"+r+"_suggestion").remove();var o=user_registration_pro_frontend_data.message_email_suggestion_fields.replace("{suggestion}",'<a href="#" class="mailcheck-suggestion" data-id="'+r+'" title="'+user_registration_pro_frontend_data.message_email_suggestion_title+'">'+a.full+"</a>");t(e).after('<label class="user-registration-error mailcheck-error" id="'+r+'_suggestion">'+o+"</label>")},empty:function(){t("#"+r+"_suggestion").remove()}}),t(document).on("click",".ur-field-item .mailcheck-suggestion",function(e){var r=t(this),a=r.attr("data-id");e.preventDefault(),t("#"+a).val(r.text()),r.parent().remove()})}))}),t(document).ready(function(){t(".input-wrapper").each(function(){if(2==t(this).children().length){var e=t(this).children(":first");e.hasClass("password-input-group")?e.children(":first").addClass("ur-pro-input-icon-padding"):e.addClass("ur-pro-input-icon-padding")}})}),t(window).on("user_registration_repeater_modified",function(){e()}),t(document).ready(function(){!function(){if(user_registration_pro_frontend_data.keyboard_friendly_form_enabled){var e=t("form.register"),r=e.find(".ur-frontend-field");r.first().trigger("focus"),t("body").on("keydown",function(a){(a.ctrlKey||a.metaKey)&&13===a.which&&(a.preventDefault(),e.submit()),r.last().is(":focus")?9===a.which&&(a.preventDefault(),t("form.register").find(".ur-submit-button").first().trigger("focus")):t("form.register").find(".ur-submit-button.button").is(":focus")&&9===a.which&&(a.preventDefault(),r.first().trigger("focus"))})}}(),e(),function(){var e=user_registration_pro_frontend_data.restrict_copy_paste_fields;Array.isArray(e)&&e.length&&t(e).each(function(e,r){t("#"+r).on("cut copy paste",function(t){t.preventDefault()})}),t("#password_2").hasClass("restrict-copy-paste")&&t("#password_2").on("cut copy paste",function(t){t.preventDefault()})}(),r(),t("form.register").each(function(){t(document).on("keyup",".ur-field-item .input-captcha",function(){var e,r,a=t(this);if(a.closest(".input-wrapper").hasClass("ur-captcha-math")){var o=Number(a.attr("data-n1")),n=Number(a.attr("data-n2")),i=a.attr("data-cal");switch(r=Number(a.val()),e=!1,i){case"-":e=o-n;break;case"+":e=o+n;break;case"*":e=o*n}}else r=a.val().toString().toLowerCase().trim(),e=a.attr("data-a").toString().toLowerCase().trim();if(r==e)return a.closest(".ur-field-item").find(".user-registration-error").remove(),void a.siblings(".captcha-error").remove();a.closest(".ur-field-item").find(".user-registration-error").remove(),a.siblings(".captcha-error").remove(),t(a).after('<label class="user-registration-error captcha-error">'+user_registration_pro_frontend_data.captcha_error_message+"</label>")})}),t(document).on("ur_handle_field_error_messages",function(t,e,r){var a=e.find('.field-captcha[data-field-id="'+r+'"]');a.find(".ur-captcha-image").length>0&&(a.find(".user-registration-error").remove(),a.siblings(".captcha-error").remove(),a.find(".ur-captcha-image").append('<label class="user-registration-error captcha-error">'+user_registration_pro_frontend_data.captcha_error_message+"</label>"))}),t(document).on("user_registration_frontend_after_ajax_complete",function(e,a,o,n){t(".captcha-error").length>0?e.preventDefault():r()}),a(),t(document).on("user_registration_frontend_before_form_submit",function(e,r,a,o){e.preventDefault();var n,i,s,d,u,c,l=[],_=[],f=[],p=a,g=p.find(".input-captcha"),m=p.find('input:hidden[class="qa"]'),h=p.find('input:hidden[class="captcha_correct_icon"]');g.each(function(){if(n=t(this).attr("data-n1"),i=t(this).attr("data-n2"),s=t(this).attr("data-cal"),d={n1:n,n2:i,cal:s},t(this).closest(".input-wrapper").hasClass("ur-captcha-math")){var e={};e[t(this).data("id")]=d,l.push(e)}}),m.each(function(){if(u={qa:t(this).val()},t(this).closest(".input-wrapper").hasClass("ur-captcha-qa")){var e={};e[t(this).siblings(".input-captcha").data("id")]=u,f.push(e)}}),h.each(function(){if(c={i_captcha:t(this).val(),i_captcha_group:t(this).siblings(".ur-icon-group").attr("data-group")},t(this).closest(".input-wrapper").hasClass("ur-captcha-image")){var e={};e[t(this).siblings(".ur-icon-group").find(".input-captcha-icon-radio").data("id")]=c,_.push(e)}}),l.length>0&&(r.ur_captcha_math=l),f.length>0&&(r.ur_captcha_qa=f),_.length>0&&(r.ur_captcha_image=_)})}),t(document).on("click",".cancel-membership-button",function(){var e=t(this),r=t("#membership-error-div"),a=e.text();t.ajax({url:user_registration_pro_frontend_data.ajax_url,type:"POST",data:{action:"user_registration_pro_cancel_subscription",security:user_registration_pro_frontend_data.user_data_nonce,subscription_id:e.data("id")},beforeSend:function(){e.text(user_registration_pro_frontend_data.privacy_sending_text)},success:function(t){t.success?(r.hasClass("btn-error")&&(r.removeClass("btn-error"),r.addClass("btn-success")),r.text(t.data.message),r.show(),location.reload()):(r.hasClass("btn-success")&&(r.removeClass("btn-success"),r.addClass("btn-error")),r.text(t.data.message),r.show())},complete:function(){e.text(a)}})}),t(document).on("click",".ur-request-button",function(e){e.preventDefault();var r=t(this).data("action"),a=t(this),o=t("#"+r).val();if(t(".ur-field-area-response."+r).hide(),t("#"+r).length&&""===o)t(".ur-field-error."+r).show();else{t(".ur-field-error."+r).hide();var n={action:"user_registration_pro_request_user_data",request_action:r,security:user_registration_pro_frontend_data.user_data_nonce};t("#"+r).length&&(n.password=o);e.target;var i=a.text();t.ajax({url:user_registration_pro_frontend_data.ajax_url,type:"POST",data:n,beforeSend:function(){a.text(user_registration_pro_frontend_data.privacy_sending_text)},success:function(e){1===e.data.success&&("ur-export-data"===r&&(t(document).find('label[name="ur-export-data"]').hide(),t(document).find("#ur-export-data").hide(),t(document).find(".ur-export-data-button").hide()),"ur-erase-data"===r&&(t(document).find('label[name="ur-erase-data"]').hide(),t(document).find("#ur-erase-data").hide(),t(document).find(".ur-erase-data-button").hide())),t(document).find(".ur-field-area-response."+r).html(e.data.answer).show(),a.text(i)},error:function(t){}})}}),t(document).on("click","#ur-new-erase-request",function(e){e.preventDefault(),t("#ur-erase-personal-data-request-input").show(),t(document).find(".ur-erase-personal-data").hide()}),t(document).on("click","#ur-new-download-request",function(e){e.preventDefault(),t("#ur-download-personal-data-request-input").show(),t(document).find(".ur-download-personal-data").hide()});var a=function(){function e(e,r){t.ajax({url:user_registration_pro_frontend_slot_booking_data.ajax_url,data:e,type:"POST",dataType:"JSON",beforeSend:function(){var e=t(document).find(".ur-submit-button");t(e).prop("disabled",!0);var r=t(document).find(".user-registration-submit-Button");t(r).prop("disabled",!0)},success:function(e){if(!0===e.success){t(document).find("#"+r.data("id").replace(/-(start|end)$/,"")+"-slot-booking-error").remove();var a='<label id="'+r.data("id").replace(/-(start|end)$/,"")+'-slot-booking-error" class="user-registration-error" for="user_login">'+e.data.message+"</label>";t(document).find("#"+r.data("id").replace(/-(start|end)$/,"")+"_field").append(a)}else{var o=t(document).find(".ur-submit-button");t(o).prop("disabled",!1);var n=t(document).find(".user-registration-submit-Button");t(n).prop("disabled",!1)}}})}t(document).on("change",".date-slot-booking",function(){var r=t(this).data("enable-date-slot-booking");if(1===r){var a=t(this).data("date-format"),o=t(this).data("mode"),n=t(this).data("id").replace("user_registration_","");t(document).find("#"+t(this).data("id")+"-slot-booking-error").remove();var i={action:"user_registration_pro_user_slot_booking",security:user_registration_pro_frontend_slot_booking_data.slot_booking_data_nonce},s=t(this).val(),d=t(this).data("local"),u=t(document).find(".register").data("form-id");if(""===s)return;i.dateValue=s,i.dateLocal=d,i.formId=u,i.mode="date",i.modeType=o,i.format=a,i.fieldKey=n,i.enableDateSlotBooking=r,e(i,t(this))}}),t(document).on("change",".time-slot-booking",function(){var r=t(this).data("enable-time-slot-booking"),a="";if(t(this).closest("form").hasClass("user-registration-EditProfileForm"))a="user_registration_";if(1===r){var o=a+t(this).data("target-date-field"),n=t("#"+o+"_field"),i=t("#"+o+"_field").find(".flatpickr-input"),s="time",d="",u=t(this).data("time-format"),c=t(this).data("id").replace(/-(start|end)$/,""),l=c.replace("user_registration_","");t(document).find("#"+c+"-slot-booking-error").remove();var _={action:"user_registration_pro_user_slot_booking",security:user_registration_pro_frontend_slot_booking_data.slot_booking_data_nonce};if(n.length>0){var f=t(i).val();if(t("#"+o+"_field").find("#"+o+"-slot-booking-error").remove(),""===f){var p='<label id="'+o+'-slot-booking-error"class="user-registration-error" for="user_login">'+user_registration_pro_frontend_slot_booking_data.time_slot_booking_notice+"</label>";return t(this).val(""),void t(document).find("#"+o+"_field").append(p)}var g=t(i).data("date-format"),m=t(i).data("locale");s="date-time",d=t(i).data("mode"),u=g+" "+u;_.dateValue=f,_.dateLocal=m}var h=t(document).find(".register").data("form-id"),b=t(this).data("time-interval"),v=t("#"+c+"_field").find('input[name="'+c+'-start"]').val(),w=t("#"+c+"_field").find('input[name="'+c+'-end"]').val(),k=v+" to "+w;if(""===v||""===w)return;_.timeValue=k,_.timeInterval=b,_.formId=h,_.mode=s,_.modeType=d,_.format=u,_.fieldKey=l,_.enableTimeSlotBooking=r,e(_,t(this))}})}}(jQuery);