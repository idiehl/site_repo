---
description: Atlas Universalis — single consolidated ruleset
alwaysApply: true
---

# Atlas Universalis

## Environment

- Repo: `D:\www\atlasuniversalis` — `github.com/idiehl/site-repo`
- Server: DigitalOcean droplet `root@167.71.179.90`
- Server path: `/var/www/atlasuniversalis.com`
- Dev portal: `https://atlasuniversalis.com/dev`

## Apps

| App | Directory | Domain |
|-----|-----------|--------|
| Main Site | `frontend-main/` | `atlasuniversalis.com` |
| Atlas Apply / AtlasOps | `frontend/` + `atlasops/` | `apply.atlasuniversalis.com` |
| AtlasForge | `atlasforge/` | `forge.atlasuniversalis.com` |
| ElectraCast | `electracast/` | `electracast.atlasuniversalis.com` |
| Atlas Meridian | `meridian/` | Desktop (Avalonia, not deployed) |
| MCP Server | `mcp/` | Local (Cursor) |

## Tech Stack

- **Backend**: Python 3.11+, FastAPI, SQLAlchemy (async), PostgreSQL, Celery + Redis
- **Frontend**: Vue 3 + Vite, Tailwind CSS, Pinia
- **Deployment**: Nginx, GitHub Actions, Certbot SSL

## Non-Negotiables

1. Never hardcode secrets — use environment variables
2. Never break existing routes — `/` and `/pages/{slug}` must work
3. Prefer async patterns throughout the stack
4. Prefer MCP tools when available

## Documentation (Tiered)

Use `/doc-ops` subagent or atlasops-dashboard MCP tools. Tier determines depth:

- **Fast** (minor edits): Master Log only
- **Standard** (feature/bug): Master Log + App Log + Inventory if code changed
- **Full** (infra/schema): All docs + STATUS updates

After deploys, `/post-deploy-docs` auto-updates documentation from the changeset.

## Workflow

Use subagents (`.cursor/agents/`) for specialized tasks — Cursor auto-delegates based on descriptions. Key chains:

1. Code changes → `/doc-ops` in parallel
2. Production deploy → `/deploy` → `/post-deploy-docs` (with commit range)
3. Verification → `/test-runner`
4. Structured responses → `/teller`

Launch subagents in parallel when tasks split into docs + deploy + tests.

## Efficiency

- Use the smallest acceptable workflow tier
- Avoid redundant dev portal checks during a single session
- If a task suits a new MCP server or workflow, suggest it
